{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Eventos</h1>

  {% if puede_crear %}
    <a class="btn btn-success" href="{% url 'eventos:crear' %}">Crear evento</a>
  {% endif %}
</div>

<div class="row">
  {% for evento in eventos %}
    <div class="col-md-4 mb-3">
      <div class="card h-100">

        {% if evento.imagen %}
          <img src="{{ evento.imagen.url }}" class="card-img-top">
        {% endif %}

        <div class="card-body d-flex flex-column">

          <h5 class="card-title">{{ evento.titulo }}</h5>
          <p class="card-text text-truncate">{{ evento.descripcion }}</p>
          <p class="small text-muted">{{ evento.fecha }}</p>

          <div class="mt-auto">

            <a class="btn btn-primary btn-sm" href="{% url 'eventos:detalle' evento.pk %}">Ver</a>

            {% if puede_editar or evento.organizador == user %}
              <a class="btn btn-secondary btn-sm" href="{% url 'eventos:editar' evento.pk %}">Editar</a>
            {% endif %}

            {% if es_admin %}
              <a class="nav-link btn btn-success text-white ms-3 px-3 py-1" href="{% url 'eventos:eliminar' evento.pk  %}">Eliminar</a>
            {% endif %}

          </div>

        </div>

      </div>
    </div>
  {% empty %}
    <p>No hay eventos disponibles.</p>
  {% endfor %}
</div>

{% endblock %}
